var tagstore=function(){this.data={},this.set=function(t){this.data[t]=!0},this.get=function(t){return!!this.data[t]&&this.data[t]},this.unset=function(t){this.data[t]=!1}},user=function(t){this.selector=t.$||$,this.reset()};user.prototype.reset=function(){this.tags=new tagstore,this.listeners=[]},user.prototype.set=function(t,s){s?this.tags.set(t):this.tags.unset(t),this.triggerListeners()},user.prototype.triggerListeners=function(){this.listeners.map(function(t){t.test()&&t.cb(this)})},user.prototype.has=function(t,s,e){var n=this,i=function(s){var i=$(s);i&&i.on(e,function(s){n.tags.set(t,!!$(this).val()),n.triggerListeners()})};if(e&&"string"==typeof s&&i(s),e&&"string"!=typeof s&&s.map(function(t){i(t)}),!s)return this.tags.get(t)===!0},user.prototype.on=function(t,s){var e=this;if("string"==typeof t){var n=t;t=function(){return e.tags.get(n)===!0}}this.listeners.push({test:t,cb:s})},user.prototype.once=function(t,s){var e;return function(){return t&&(e=t.apply(s||this,arguments),t=null),e}};
